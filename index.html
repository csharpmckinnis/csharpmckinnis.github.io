<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Utility Service Application - Town of Cary</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header>
            <img src="cary_logo_tagline_white.png" alt="Town of Cary Logo" class="logo">
            <h1>Utility Service Application</h1>
        </header>

        <main>
            <form id="webToCaseForm" action="https://carync--test.sandbox.my.salesforce.com/servlet/servlet.WebToCase?encoding=UTF-8&orgId=00DcW000000rVAX" method="POST" onsubmit="return false;">
                <input type="hidden" name="orgid" value="00DcW000000rVAX">
                <input type="hidden" name="retURL" value="http://">
                <input type="hidden" name="debug" value="1">
                <input type="hidden" name="debugEmail" value="csharpmckinnis@gmail.com">

                <div class="progress-bar">
                    <div class="progress-step active">Account Info</div>
                    <div class="progress-step">Additional Details</div>
                </div>

                <div class="form-step active" id="step1">
                    <h2>Getting Started</h2>
                    <h3><i class="fa-solid fa-map-location-dot"></i> Service Location</h3>
                    <p></p>

                    <div class="form-group">
                        <label for="startServiceDate" class="required">Start Date</label>
                        <input type="date" id="startServiceDate" name="startServiceDate" required>
                        <small class="error-message" style="color: red; display: none;">This field is required</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="serviceAddress" class="required"> Service Address</label>
                        <input type="text" id="serviceAddress" name="serviceAddress" placeholder="123 Main St" required>
                        <small class="error-message" style="color: red; display: none;">How are we supposed to know where to send the water?</small>
                    </div>

                    <div class="form-group two-column-group">
                        <div class="two-column-fields">
                            <div class="field-group">
                                <label for="city" class="required">City</label>
                                <input type="text" id="city" maxlength="30" name="city" placeholder="Cary" required>
                                <small class="error-message" style="color: red; display: none;">Hint: it's probably Cary</small>

                            </div>
                            <div class="field-group">
                                <label for="zip" class="required">Zip</label>
                                <input type="text" id="zip" maxlength="40" name="zip" placeholder="27513" required>
                                <small class="error-message" style="color: red; display: none;">This field is required</small>

                            </div>
                        </div>
                    </div>


                    <h3><i class="fa-solid fa-circle-user"></i> Primary Contact (Authorized Account Owner)
                        <span class="info-icon">
                            <i class="fa-solid fa-circle-info"></i>
                            <span class="tooltip-text">
                                The person primarily associated with the service account.
                            </span>
                        </span>
                    </h3>
                    <div class="form-group two-column-group">
                        <label for="name" class="required">Name</label>
                        <div class="two-column-fields">
                            <div class="field-group">
                                <input type="text" id="firstName" name="firstName" placeholder="First" required>
                                <small class="error-message" style="color: red; display: none;">Come on, you have to have a name</small>
                            </div>
                            <div class="field-group">
                                <input type="text" id="lastName" name="lastName" placeholder="Last" required>
                                <small class="error-message" style="color: red; display: none;">This field is required</small>
                            </div>
                        </div>
                    </div>

                    <div class="form-group two-column-group">
                        <div class="two-column-fields">
                            <div class="field-group">
                                <label for="email" class="required">Email</label>
                                <input type="text" id="email" maxlength="30" name="email" placeholder="firstname.lastname@domain.com" required>
                                <small class="error-message" style="color: red; display: none;">How else will you get the utility enthusiast's newsletter?</small>
                            </div>
                            <div class="field-group">
                                <label for="phone" class="required">Phone</label>
                                <input type="text" id="phone" maxlength="40" name="Supplied_Phone__c" placeholder="(919) 123-4567" class="phone-input" required>
                                <small class="error-message" style="color: red; display: none;">I promise we won't spam-call you</small>
                            </div>
                        </div>
                    </div>

                    <h3><i class="fa-regular fa-circle-user"></i> Secondary Contact
                        <span class="info-icon">
                            <i class="fa-solid fa-circle-info"></i>
                            <span class="tooltip-text">
                                Another user, able to access and manage the account. For commercial applicants, we recommend a billing contact.
                            </span>
                        </span>
                    </h3>
                    <div class="form-group two-column-group">
                        <label for="billingContactName" class="required">Name</label>
                        <div class="two-column-fields">
                            <div class="field-group">                        
                                <input type="text" id="billingContactFirstName" name="billingContactFirstName" placeholder="First" required>
                                <small class="error-message" style="color: red; display: none;">This field is required</small>
                            </div>
                            <div class="field-group">
                                <input type="text" id="billingContactLastName" name="billingContactLastName" placeholder="Last" required>
                                <small class="error-message" style="color: red; display: none;">This field is required</small>
                            </div>
                        </div>
                    </div>

                    <div class="form-group two-column-group">
                        <div class="two-column-fields">
                            <div class="field-group">
                                <label for="billingContactEmail" class="required">Email</label>
                                <input type="email" id="billingContactEmail" name="billingContactEmail" placeholder="firstname.lastname@domain.com" required>
                                <small class="error-message" style="color: red; display: none;">This field is required</small>
                            </div>
                            <div class="field-group">
                                <label for="billingContactPhone">Phone</label>
                                <input type="text" id="billingContactPhone" name="billingContactPhone" placeholder="(919) 123-4567" class="phone-input">
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="billingCompanyName"><i class="fa-solid fa-briefcase"></i> If Third-Party: Company Name</label>
                        <input type="text" id="billingCompanyName" name="billingCompanyName">
                    </div>

                    <div class="form-group">
                        <label class="required">Account Type</label>
                        <div class="radio-group" required>
                            <input type="radio" id="newCustomer" name="Account_Type__c" value="New Customer">
                            <label for="newCustomer"><i class="fa-solid fa-truck-ramp-box"></i> New Resident</label>
                            
                            <input type="radio" id="transferAccount" name="Account_Type__c" value="Transfer from Previous Town of Cary Account" onclick="toggleTransferFields()">
                            <label for="transferAccount"><i class="fa-solid fa-right-left"></i> Transfer</label>
                            
                            <input type="radio" id="commercial" name="Account_Type__c" value="Commercial" onclick="toggleCommercialFields()">
                            <label for="commercial"><i class="fa-solid fa-briefcase"></i> Commercial</label>
                            
                            <input type="radio" id="landlord" name="Account_Type__c" value="Landlord">
                            <label for="landlord"><i class="fa-solid fa-sign-hanging"></i> Landlord</label>
                            <small id="accountTypeError" style="display:none; color:red;">Please select an account type.</small>
                        </div>
                    </div>

                    <div id="commercialFields" style="display:none;">
                        <h2><i class="fa-solid fa-briefcase"></i> Commercial Account</h2>
                        <div class="form-group">
                            <label for="businessName">Business Name</label>
                            <input type="text" id="businessName" name="businessName">
                        </div>

                        <div class="form-group two-column-group">
                            <div class="two-column-fields">
                                <div class="field-group">
                                    <label for="federalTaxId">TIN/Federal Tax ID 
                                        <span class="info-icon">
                                            <i class="fa-solid fa-circle-info"></i>
                                            <span class="tooltip-text">
                                                This is used as the business' ID. Deposits are billed when starting services and are based on meter size at the service location. The deposit will be refundable after a year of good pay history or termination of services.
                                            </span>
                                        </span>
                                    </label>
                                    <input type="text" id="federalTaxId" name="federalTaxId">
                                </div>
                                <div class="field-group">
                                    <label for="businessPhone">Business Phone Number</label>
                                    <input type="text" id="businessPhone" name="businessPhone" class="phone-input" placeholder="(919) 867-5309">
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="businessPhone">Business Phone Number</label>
                            <input type="text" id="businessPhone" name="businessPhone" class="phone-input">
                        </div>

                        <h3>Additional Authorized Contact (Business Manager)</h3>
                        <div class="form-group">
                            <div class="radio-group">
                                <input type="radio" id="maintenanceInHouse" name="maintenanceType" value="In-House Maintenance">
                                <label for="maintenanceInHouse">In-House</label>
                                
                                <input type="radio" id="maintenanceThirdParty" name="maintenanceType" value="Third Party">
                                <label for="maintenanceThirdParty">Third-Party</label>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="additionalContactFirstName">First Name</label>
                            <input type="text" id="additionalContactFirstName" name="additionalContactFirstName">
                        </div>
                        
                        <div class="form-group">
                            <label for="additionalContactLastName">Last Name</label>
                            <input type="text" id="additionalContactLastName" name="additionalContactLastName">
                        </div>
                        
                        <div class="form-group">
                            <label for="additionalContactPhone">Phone</label>
                            <input type="text" id="additionalContactPhone" name="additionalContactPhone" class="phone-input">
                        </div>
                        
                        <div class="form-group">
                            <label for="additionalContactEmail">Email</label>
                            <input type="email" id="additionalContactEmail" name="additionalContactEmail">
                        </div>
                        
                        <div class="form-group">
                            <label for="additionalCompanyName">If Third-Party: Business Name</label>
                            <input type="text" id="additionalCompanyName" name="additionalCompanyName">
                        </div>
                    </div>
                </div>

                <div class="form-step" id="step2">
                    <div id="transferFields" style="display:none;">
                        <h2><i class="fa-solid fa-route"></i> Transferring Service
                            <span class="info-icon">
                                <i class="fa-solid fa-circle-info"></i>
                                <span class="tooltip-text">
                                    Moving an account from one Town of Cary-serviced address to another.
                                </span>
                            </span>
                        </h2>
                        <h3>Previous Account Info</h3>


                        <div class="form-group">
                            <label for="previousServiceStopDate">Service Stop Date</label>
                            <input type="date" id="previousServiceStopDate" name="previousServiceStopDate">
                        </div>
                
                        <div class="form-group">
                            <label for="previousServiceAddress">Service Address</label>
                            <input type="text" id="previousServiceAddress" name="previousServiceAddress">
                        </div>

                        <div class="form-group two-column-group">
                            <div class="two-column-fields">
                                <div class="field-group">
                                    <label for="previousServiceCity">City</label>
                                    <input type="text" id="previousServiceCity" name="previousServiceCity">
                                </div>
                        
                                <div class="field-group">
                                    <label for="previousServiceState">State</label>
                                    <input type="text" id="previousServiceState" name="previousServiceState">
                                </div>
                        
                                <div class="field-group">
                                    <label for="previousServiceZip">Zip</label>
                                    <input type="text" id="previousServiceZip" name="previousServiceZip">
                                </div>
                            </div>
                        </div>
                        
                    </div>
                
                    <h2><i class="fa-solid fa-envelope"></i> Mailing Info</h2>
                
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="sameAsService" name="sameAsService" onclick="copyServiceAddress()"> Mailing Address is same as Service Address
                        </label>
                    </div>
                
                    <div class="form-group">
                        <label for="mailingAddress">Mailing Address</label>
                        <input type="text" id="mailingAddress" name="mailingAddress">
                    </div>
                
                    <div class="form-group">
                        <label for="mailingCity">City</label>
                        <input type="text" id="mailingCity" name="mailingCity">
                    </div>
                
                    <div class="form-group">
                        <label for="mailingZip">Zip</label>
                        <input type="text" id="mailingZip" name="mailingZip">
                    </div>

                    <h2>Other Info</h2>
                    <p>All Cary service addresses are entitled to one garbage cart with their normal service. A second cart can be requested for $4.</p>
                    <div class="form-group">
                        <label for="secondGarbageCart">
                            <input type="checkbox" id="secondGarbageCart" name="secondGarbageCart"> Request additional cart
                        </label>
                    </div>
                </div>

                <div class="form-step" id="docusignStep" style="display:none;">
                    <div style="text-align: center; margin-top: 20px;">
                        <iframe id="docusignFrame" style="width: 100%; height: calc(100vh - 350px); border: none;"></iframe>
                    </div>
                </div>

                <div class="form-step" id="successStep" style="display:none;">
                    <div style="text-align: center; margin-top: 20px;">
                        <h2>Thank you!</h2>
                        <p>Your submission has been completed successfully.</p>
                    </div>
                </div>

                <!-- Hidden fields -->
                <input type="hidden" id="description" name="description">
                <input type="hidden" name="Category__c" value="Utilities">
                <input type="hidden" name="Subcategory__c" value="Utility Accounts">
                <input type="hidden" name="Scenario__c" value="Start/Stop Service">
                <input type="hidden" id="Subject" name="Subject" value="Utility Service Application (Web Submission)">
                <input type="hidden" id="SuppliedName" name="first_name">
                <input type="hidden" id="external" name="external" value="1">

                <div class="form-navigation">
                    <button type="button" id="prevBtn" class="btn btn-secondary">Previous</button>
                    <button type="button" id="nextBtn" class="btn btn-primary">Next</button>
                </div>
            </form>
        </main>

        <footer>
            <p>&copy; 2024 Town of Cary. All rights reserved.</p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>
